# ๐ KarmaSystem WebApp

ะะพะปะฝะพัะตะฝะฝัะน ะปะธัะฝัะน ะบะฐะฑะธะฝะตั ะดะปั Telegram WebApp, ะดัะฑะปะธััััะธะน ะฒัะต ััะฝะบัะธะธ ะฑะพัะฐ.

## ๐ฏ **ะคะฃะะะฆะะะะะ ะะ ะะะะฏะ**

### **๐ค User (ะะพะปัะทะพะฒะฐัะตะปั)**
- ๐ ะัะพัะผะพัั ััะฐัะธััะธะบะธ
- ๐ค ะะธัะฝัะน ะฟัะพัะธะปั
- ๐ ะััะพัะธั ะฐะบัะธะฒะฝะพััะธ

### **๐ค Partner (ะะฐััะฝะตั)**
- ะัะต ััะฝะบัะธะธ User +
- ๐ช ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐััะพัะบะฐะผะธ ะทะฐะฒะตะดะตะฝะธะน
- โ ะกะพะทะดะฐะฝะธะต/ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะบะฐััะพัะตะบ
- ๐ ะกัะฐัะธััะธะบะฐ ะฟะพ ะบะฐััะพัะบะฐะผ

### **๐ฅ Admin (ะะดะผะธะฝะธัััะฐัะพั)**
- ะัะต ััะฝะบัะธะธ Partner +
- ๐ ะะพะดะตัะฐัะธั ะฟะฐััะฝะตััะบะธั ะบะฐััะพัะตะบ
- โ ะะดะพะฑัะตะฝะธะต/ะพัะบะปะพะฝะตะฝะธะต ะทะฐัะฒะพะบ
- ๐ ะะฝะฐะปะธัะธะบะฐ ะฟะพ ัะธััะตะผะต

### **๐ Superadmin (ะกัะฟะตัะฐะดะผะธะฝ)**
- ะัะต ััะฝะบัะธะธ Admin +
- โ๏ธ ะกะธััะตะผะฝัะต ะฝะฐัััะพะนะบะธ
- ๐ ะะพะปะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ
- ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต ัะธััะตะผะพะน

## ๐ **ะะซะกะขะะซะ ะกะขะะะข**

### **1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน**
```bash
cd webapp/backend
pip install -r requirements.txt
```

### **2. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั**
```bash
export BOT_TOKEN="your_bot_token"
export DATABASE_URL="postgresql://user:pass@localhost/db"
export JWT_SECRET="your_jwt_secret"
```

### **3. ะะฐะฟััะบ ะฑัะบะตะฝะดะฐ**
```bash
cd webapp/backend
python main.py
```

### **4. ะัะบัััะธะต WebApp**
- ะัะบัะพะนัะต ะฑะพัะฐ ะฒ Telegram
- ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/webapp`
- ะะฐะถะผะธัะต ะบะฝะพะฟะบั "๐ ะัะบัััั ะะธัะฝัะน ะบะฐะฑะธะฝะตั"

## ๐ณ **DOCKER ะะะะฃะกะ**

```bash
cd webapp
docker-compose up -d
```

- Backend: http://localhost:8000
- Frontend: http://localhost:3000
- API Docs: http://localhost:8000/docs

## ๐ **ะกะขะะฃะะขะฃะะ ะะะะะะขะ**

```
webapp/
โโโ backend/
โ   โโโ main.py              # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ requirements.txt     # Python ะทะฐะฒะธัะธะผะพััะธ
โ   โโโ Dockerfile          # Docker ะบะพะฝัะธะณััะฐัะธั
โโโ frontend/
โ   โโโ index.html          # HTML ะธะฝัะตััะตะนั
โ   โโโ Dockerfile          # Nginx ะบะพะฝัะธะณััะฐัะธั
โโโ docker-compose.yml       # Docker Compose
โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั
```

## ๐ **ะะะะะะะกะะะกะขะฌ**

- โ ะะฐะปะธะดะฐัะธั Telegram initData
- โ JWT ัะพะบะตะฝั ั ะธััะตัะตะฝะธะตะผ
- โ RBAC ะฟะพ ัะพะปัะผ (user/partner/admin/superadmin)
- โ ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะฝะฐ ะบะฐะถะดัะน ัะฝะดะฟะพะธะฝั
- โ CORS ะทะฐัะธัะฐ

## ๐ **API ะญะะะะะะะขะซ**

### **ะะฒัะพัะธะทะฐัะธั**
- `POST /api/auth/webapp` - ะะฒัะพัะธะทะฐัะธั ัะตัะตะท initData

### **ะะพะปัะทะพะฒะฐัะตะปั**
- `GET /api/me` - ะะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต
- `GET /api/stats/overview` - ะะฑัะฐั ััะฐัะธััะธะบะฐ

### **ะะฐััะฝะตั**
- `GET /api/partner/cards` - ะะพะธ ะบะฐััะพัะบะธ
- `POST /api/partner/cards` - ะกะพะทะดะฐัั ะบะฐััะพัะบั

### **ะะดะผะธะฝ**
- `GET /api/admin/moderation` - ะัะตัะตะดั ะผะพะดะตัะฐัะธะธ

## ๐ **ะะะขะะะะะฆะะฏ ะก ะะะขะะ**

WebApp ะธะฝัะตะณัะธััะตััั ั ัััะตััะฒัััะธะผ ะฑะพัะพะผ ัะตัะตะท ะบะพะผะฐะฝะดั `/webapp`:

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั `/webapp`
2. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ะบะฝะพะฟะบั "๐ ะัะบัััั ะะธัะฝัะน ะบะฐะฑะธะฝะตั"
3. WebApp ะพัะบััะฒะฐะตััั ะฒ ะฑัะฐัะทะตัะต Telegram
4. ะะฒัะพัะธะทะฐัะธั ัะตัะตะท Telegram initData
5. ะะพะปะฝัะน ะดะพัััะฟ ะบ ััะฝะบัะธัะผ ะฟะพ ัะพะปะธ

## ๐ **ะกะะะฅะะะะะะะฆะะฏ ะะะะะซะฅ**

- WebApp ะธัะฟะพะปัะทัะตั ัั ะถะต ะะ ััะพ ะธ ะฑะพั
- ะัะต ะธะทะผะตะฝะตะฝะธั ัะธะฝััะพะฝะธะทะธัััััั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฑะตััััั ะธะท ัััะตััะฒัััะตะน ัะฐะฑะปะธัั `users`

## ๐จ **ะขะะะซ ะ ะะะะะะะะะฆะะฏ**

- โ ะะพะดะดะตัะถะบะฐ ัะตะผ Telegram (ัะฒะตัะปะฐั/ัะตะผะฝะฐั)
- โ ะัะปััะธัะทััะฝะพััั (RU/EN/VI/KO)
- โ ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ
- โ ะะพะฑะธะปัะฝัะน first

## ๐ **ะะะะะะขะะ**

### **ะะปะฐะฝะธััะตะผัะต ััะฝะบัะธะธ:**
- ๐ ะะฐััะธัะตะฝะฝะฐั ะฐะฝะฐะปะธัะธะบะฐ
- ๐ง ะกะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน
- ๐ ะะตะฐะปัะฝะพะต ะฒัะตะผั (WebSocket)
- ๐ฑ PWA ะฟะพะดะดะตัะถะบะฐ
- ๐จ ะะฐััะธัะตะฝะฝัะต ัะตะผั

### **ะขะตัะฝะธัะตัะบะธะต ัะปัััะตะฝะธั:**
- ๐ ะััะธัะพะฒะฐะฝะธะต (Redis)
- ๐ ะะพะฝะธัะพัะธะฝะณ
- ๐ ะะฐััะธัะตะฝะฝะฐั ะฑะตะทะพะฟะฐัะฝะพััั
- ๐ ะะฟัะธะผะธะทะฐัะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

## ๐ **ะะขะะะะะ**

### **ะัะพะฒะตัะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ:**
```bash
curl -X POST "http://localhost:8000/api/auth/webapp" \
  -H "Content-Type: application/json" \
  -d '{"init_data": "your_init_data"}'
```

### **ะัะพะฒะตัะบะฐ API:**
```bash
curl -H "Authorization: Bearer your_token" \
  "http://localhost:8000/api/me"
```

## ๐ **ะะะะะะะะะ**

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะปะพะณะธ ะฑัะบะตะฝะดะฐ
2. ะฃะฑะตะดะธัะตัั ะฒ ะฟัะฐะฒะธะปัะฝะพััะธ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
3. ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะะ
4. ะฃะฑะตะดะธัะตัั ััะพ ะฑะพั ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ

---

**WebApp ะฟะพะปะฝะพัััั ะธะฝัะตะณัะธัะพะฒะฐะฝ ั ัััะตััะฒัััะธะผ ะฑะพัะพะผ ะธ ะธัะฟะพะปัะทัะตั ัะต ะถะต ัะพะปะธ ะธ ะดะฐะฝะฝัะต!** ๐
