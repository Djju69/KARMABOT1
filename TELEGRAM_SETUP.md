# Настройка Telegram бота на Railway

Это руководство поможет вам развернуть и настроить Telegram бота на платформе Railway.

## Необходимые переменные окружения

Перед развертыванием установите следующие переменные окружения в настройках вашего проекта Railway:

- `TELEGRAM_BOT_TOKEN` - Токен вашего бота от @BotFather
- `RAILWAY_STATIC_URL` - URL вашего приложения на Railway (например, `https://your-project.up.railway.app`)
- `TELEGRAM_WEBHOOK_SECRET` - Секретный ключ для верификации вебхука (можно сгенерировать командой `openssl rand -hex 16`)
- `ENVIRONMENT` - Окружение (`production` или `development`)
- `DEBUG` - Режим отладки (`true` или `false`)

## Развертывание на Railway

1. **Импортируйте репозиторий** в ваш аккаунт Railway
2. В настройках проекта добавьте переменные окружения из раздела выше
3. Запустите деплой

## Настройка вебхука

После успешного деплоя настройте вебхук с помощью скрипта:

```bash
python railway_setup_webhook.py
```

Этот скрипт:
- Проверит настройки окружения
- Установит вебхук для вашего бота
- Проверит статус вебхука

## Проверка работы

1. Откройте Telegram и найдите вашего бота
2. Отправьте команду `/start`
3. Проверьте логи в панели Railway на наличие ошибок

## Устранение неполадок

### Вебхук не работает
- Убедитесь, что переменные окружения установлены правильно
- Проверьте логи приложения на наличие ошибок
- Убедитесь, что ваш бот активен и у него есть права на вебхуки

### Бот не отвечает
- Проверьте статус вебхука: `python railway_setup_webhook.py`
- Убедитесь, что приложение запущено и доступно извне
- Проверьте логи приложения

## Дополнительные команды

- Проверить статус вебхука: `python -c "import requests; print(requests.get('https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo').json())"`
- Удалить вебхук: `python -c "import requests; print(requests.get('https://api.telegram.org/bot<YOUR_BOT_TOKEN>/deleteWebhook').json())"`

## Безопасность

- Никогда не публикуйте `TELEGRAM_BOT_TOKEN` и `TELEGRAM_WEBHOOK_SECRET`
- Используйте HTTPS для всех запросов
- Регулярно обновляйте зависимости
