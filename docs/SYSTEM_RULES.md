# –°–ò–°–¢–ï–ú–ê –ü–†–ê–í–ò–õ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê KARMABOT1

## 1. –°–ò–°–¢–ï–ú–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

- –ó–∞–ø—Ä–µ—â–µ–Ω–æ:
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã/–ø–∞–ø–∫–∏/–º–∏–≥—Ä–∞—Ü–∏–∏/–º–æ–¥—É–ª–∏ (–∫—Ä–æ–º–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
  - –£–¥–∞–ª—è—Ç—å i18n-–∫–ª—é—á–∏ ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ
  - –ú–µ–Ω—è—Ç—å –∏–∫–æ–Ω–∫–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
  - –ú–µ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞, callback-data –∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Inline –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π)
- –†–∞–∑—Ä–µ—à–µ–Ω–æ:
  - Inline —Ç–æ–ª—å–∫–æ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö (–ø–æ–ª–∏—Ç–∏–∫–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è, QR, –±–∞–ª–ª—ã)
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
  - –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö i18n-–∫–ª—é—á–µ–π

## 2. –£–¢–í–ï–†–ñ–î–Å–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê

1) –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–∞—Ä—Ç–Ω—ë—Ä) ‚Äî `get_main_menu_reply(lang)`
```
üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ | üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π
‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ | ‚ùì –ü–æ–º–æ—â—å
üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
```

2) –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: –ê–¥–º–∏–Ω ‚Äî `get_main_menu_reply_admin(lang, is_superadmin=False)`
```
üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ | ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫
üìä –î–∞—à–±–æ—Ä–¥: –ú–æ–¥–µ—Ä–∞—Ü–∏—è(0) | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è(0)
‚ùì –ü–æ–º–æ—â—å
–ê–¥–º–∏–Ω –∫–∞–±–∏–Ω–µ—Ç (‚Üí get_admin_keyboard)
```

3) –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω ‚Äî `get_main_menu_reply_admin(lang, is_superadmin=True)`
```
üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ | ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫
üìä –î–∞—à–±–æ—Ä–¥: –ú–æ–¥–µ—Ä–∞—Ü–∏—è(0) | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è(0) | –°–∏—Å—Ç–µ–º–∞(OK)
‚ùì –ü–æ–º–æ—â—å
üëë –ê–¥–º–∏–Ω –∫–∞–±–∏–Ω–µ—Ç (‚Üí get_superadmin_keyboard)
```
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–Ω–æ–ø–∫–∞ ¬´üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç¬ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∞–¥–º–∏–Ω—Å–∫–∏—Ö –≥–ª–∞–≤–Ω—ã—Ö –º–µ–Ω—é –ø–æ —Ä–µ—à–µ–Ω–∏—é –°—É–ø–µ—Ä–ê–¥–º–∏–Ω–∞ (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ).

4) –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî `get_user_cabinet_keyboard()`
```
üí≥ –ú–æ–∏ –∫–∞—Ä—Ç—ã | üíé –ú–æ–∏ –±–∞–ª–ª—ã
üìà –ö–∞—Ä–º–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | ü§ù –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º
üìã –ò—Å—Ç–æ—Ä–∏—è | ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–Ω—É—Ç—Ä–∏ ‚Äî üåê –Ø–∑—ã–∫)
‚ùì –ü–æ–º–æ—â—å
‚óÄÔ∏è –ù–∞–∑–∞–¥
```

5) –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞ ‚Äî `get_partner_cabinet_keyboard(lang, has_cards=False)`
```
(–µ—Å–ª–∏ has_cards=True) üßæ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR
üóÇ –ú–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ | ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
üìä –û—Ç—á—ë—Ç | üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–Ω—É—Ç—Ä–∏ ‚Äî üåê –Ø–∑—ã–∫) | ‚ùì –ü–æ–º–æ—â—å
‚óÄÔ∏è –ù–∞–∑–∞–¥
```

### 2.1 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (RU)

- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é:
  - üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã –∏ –∫–∞—Ñ–µ
  - üßñ‚Äç‚ôÄÔ∏è SPA –∏ –º–∞—Å—Å–∞–∂
  - üèçÔ∏è –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
  - üè® –û—Ç–µ–ª–∏
  - üö∂‚Äç‚ôÇÔ∏è –≠–∫—Å–∫—É—Ä—Å–∏–∏
  - üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω—ã –∏ —É—Å–ª—É–≥–∏

- –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–∞—Å—Ç–µ—Ä–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ö):
  - –†–µ—Å—Ç–æ—Ä–∞–Ω—ã –∏ –∫–∞—Ñ–µ: üå∂Ô∏è –ê–∑–∏–∞—Ç—Å–∫–∞—è | üçù –ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è | üå≠ –£–ª–∏—á–Ω–∞—è –µ–¥–∞ | ü•ó –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∞—è
  - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: üõµ –ë–∞–π–∫–∏ | üöò –ú–∞—à–∏–Ω—ã | üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥—ã
  - SPA –∏ –º–∞—Å—Å–∞–∂: üíÖ –°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã | üíÜ‚Äç‚ôÄÔ∏è –ú–∞—Å—Å–∞–∂ | üßñ‚Äç‚ôÇÔ∏è –°–∞—É–Ω–∞
  - –û—Ç–µ–ª–∏: üè® –û—Ç–µ–ª–∏ | üè† –ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã
  - –≠–∫—Å–∫—É—Ä—Å–∏–∏: üë• –ì—Ä—É–ø–ø–æ–≤—ã–µ | üßë‚Äçü§ù‚Äçüßë –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ
  - –ú–∞–≥–∞–∑–∏–Ω—ã –∏ —É—Å–ª—É–≥–∏: üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω—ã | üîß –£—Å–ª—É–≥–∏

6) –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Äî `get_admin_keyboard(lang)`
```
üìã –ú–æ–¥–µ—Ä–∞—Ü–∏—è | üîç –ü–æ–∏—Å–∫
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã | üìß –†–∞—Å—Å—ã–ª–∫–∞
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–Ω—É—Ç—Ä–∏ ‚Äî üåê –Ø–∑—ã–∫) | ‚ùì –ü–æ–º–æ—â—å
‚óÄÔ∏è –ù–∞–∑–∞–¥
```

7) –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ ‚Äî `get_superadmin_keyboard(lang)`
```
üìã –ú–æ–¥–µ—Ä–∞—Ü–∏—è | üë• –ê–¥–º–∏–Ω—ã
üîç –ü–æ–∏—Å–∫ | üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã
üßæ –ö–∞—Ä—Ç—ã | üìß –†–∞—Å—Å—ã–ª–∫–∞
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ | üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–Ω—É—Ç—Ä–∏ ‚Äî üåê –Ø–∑—ã–∫) | ‚ùì –ü–æ–º–æ—â—å
‚óÄÔ∏è –ù–∞–∑–∞–¥
```

## 3. –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–£–î–ò–¢–ê

### 3.1 –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

#### get_main_menu_reply(lang)
- –¢–µ–∫—É—â–µ–µ:
  - –†—è–¥ 1: "üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏" | "üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π"
  - –†—è–¥ 2: "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ" | "‚ùì –ü–æ–º–æ—â—å"
  - –†—è–¥ 3: "üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç"
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó)

#### get_main_menu_reply_admin(lang, is_superadmin=False)
- –¢–µ–∫—É—â–µ–µ:
  - "ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫" –Ω–∞ –≤—Ç–æ—Ä–æ–º –º–µ—Å—Ç–µ –≤ –ø–µ—Ä–≤–æ–º —Ä—è–¥—É; —è–∑—ã–∫ –≤–Ω—É—Ç—Ä–∏ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏; –¥–∞—à–±–æ—Ä–¥ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π; ¬´üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç¬ª —É–¥–∞–ª—ë–Ω –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (—Ä–µ—à–µ–Ω–∏–µ –°—É–ø–µ—Ä–ê–¥–º–∏–Ω–∞).
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

#### get_main_menu_reply_admin(lang, is_superadmin=True)
- –¢–µ–∫—É—â–µ–µ:
  - –ï—Å—Ç—å "ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫", –¥–∞—à–±–æ—Ä–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è; ¬´üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç¬ª —É–¥–∞–ª—ë–Ω (—Ä–µ—à–µ–Ω–∏–µ –°—É–ø–µ—Ä–ê–¥–º–∏–Ω–∞); –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä—è–¥ "‚ùì –ü–æ–º–æ—â—å" –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä—è–¥ ‚Äî "üëë –ê–¥–º–∏–Ω –∫–∞–±–∏–Ω–µ—Ç".
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

#### get_user_cabinet_keyboard()
- –¢–µ–∫—É—â–µ–µ (—É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ –¢–ó):
  - "üí≥ –ú–æ–∏ –∫–∞—Ä—Ç—ã" | "üíé –ú–æ–∏ –±–∞–ª–ª—ã"
  - "üìà –ö–∞—Ä–º–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è" | "ü§ù –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º"
  - "üìã –ò—Å—Ç–æ—Ä–∏—è" | "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
  - "‚ùì –ü–æ–º–æ—â—å"
  - "‚óÄÔ∏è –ù–∞–∑–∞–¥"
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

#### get_partner_cabinet_keyboard(lang, has_cards)
- –¢–µ–∫—É—â–µ–µ:
  - (has_cards=True) "üßæ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR"
  - "üóÇ –ú–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏" | "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É"
  - "üìä –û—Ç—á—ë—Ç" | "üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
  - "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤–Ω—É—Ç—Ä–∏ ‚Äî üåê –Ø–∑—ã–∫)" | "‚ùì –ü–æ–º–æ—â—å"
  - "‚óÄÔ∏è –ù–∞–∑–∞–¥"
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

#### get_admin_keyboard(lang)
- –¢–µ–∫—É—â–µ–µ:
  - "üìã –ú–æ–¥–µ—Ä–∞—Ü–∏—è" | "üîç –ü–æ–∏—Å–∫"
  - "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" | "üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
  - "ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã" | "üìß –†–∞—Å—Å—ã–ª–∫–∞"
  - "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏" | "‚ùì –ü–æ–º–æ—â—å"
  - "‚óÄÔ∏è –ù–∞–∑–∞–¥"
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

#### get_superadmin_keyboard(lang)
- –¢–µ–∫—É—â–µ–µ:
  - "üìã –ú–æ–¥–µ—Ä–∞—Ü–∏—è" | "üë• –ê–¥–º–∏–Ω—ã"
  - "üîç –ü–æ–∏—Å–∫" | "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
  - "üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" | "ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã"
  - "üßæ –ö–∞—Ä—Ç—ã" | "üìß –†–∞—Å—Å—ã–ª–∫–∞"
  - "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏" | "üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ"
  - "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏" | "‚ùì –ü–æ–º–æ—â—å"
  - "‚óÄÔ∏è –ù–∞–∑–∞–¥"
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: –Ω–µ—Ç

### 3.2 –ê–Ω–∞–ª–∏–∑ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã (categories, user_cabinet, settings): –Ω–∞–π–¥–µ–Ω—ã.
- –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ callback-—Ö–µ–Ω–¥–ª–µ—Ä—ã (–ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–µ–∫—Ç—É):
  - karma_achievements: ‚ùå (–æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ reply-—Ö–µ–Ω–¥–ª–µ—Ä `view_karma_handler`, –±–µ–∑ callback)
  - add_partner_card: ‚úÖ (–µ—Å—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –≤ `handlers/partner.py`, entry —á–µ—Ä–µ–∑ reply "ü§ù –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º")
  - admin_partners: ‚ùå —è–≤–Ω–æ–≥–æ callback –Ω–µ—Ç (—Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∞–¥–º–∏–Ω-—Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö)
  - admin_newsletter: ‚ùå —è–≤–Ω–æ–≥–æ callback –Ω–µ—Ç (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞—Å—Å—ã–ª–∫–∏ –µ—Å—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ –≤ –∞–¥–º–∏–Ω-–º–æ–¥—É–ª—è—Ö)
  - language_settings: ‚úÖ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫/—è–∑—ã–∫–∞ (reply/inline –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)
  - my_karma / achievements (—Ä–∞–∑–¥–µ–ª—å–Ω–æ): ‚úÖ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏; –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–æ –≤ –æ–±—â–µ–º reply-—Ö–µ–Ω–¥–ª–µ—Ä–µ

### 3.3 –ê–Ω–∞–ª–∏–∑ i18n
- –ù–∞–π–¥–µ–Ω–æ:
  - `cabinet.karma_and_achievements` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω (RU)
  - `add_card` ‚Äî —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –º–µ–Ω—é (–ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö):
  - `partners` (ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã)
  - `newsletter` (üìß –†–∞—Å—Å—ã–ª–∫–∞)
  - `admin_cabinet` (–ê–¥–º–∏–Ω –∫–∞–±–∏–Ω–µ—Ç / üëë –ê–¥–º–∏–Ω –∫–∞–±–∏–Ω–µ—Ç)
  - `language_settings` (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤–Ω—É—Ç—Ä–∏ –ù–∞—Å—Ç—Ä–æ–µ–∫)

### 3.4 Inline –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- Inline –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –º–µ—Å—Ç–∞—Ö: QR-–º–µ–Ω—é, —Å–ø—Ä–∞–≤–∫–∞/AI, –∫–∞—Ä—Ç–æ—á–∫–∏/–¥–µ—Ç–∞–ª–∏. –ù–∞—Ä—É—à–µ–Ω–∏–π (inline –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ reply) –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ.

## 4. –ë–õ–û–ö–ï–†–´ –ò –†–ò–°–ö–ò
- –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–ª–æ–∫–µ—Ä–æ–≤ –Ω–µ—Ç. Inline –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ (–∫–∞—Ä—Ç–æ—á–∫–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, QR, —Å–ø—Ä–∞–≤–∫–∞/AI).

## 5. –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô (–ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ï –ë–ï–ó–û–ü–ê–°–ù–´–ï)
–í—Å–µ –ø—É–Ω–∫—Ç—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –Ω–æ–≤—ã–µ i18n-–∫–ª—é—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö.

---

## 6. –û–¢–ß–Å–¢ –û–ë –ò–ó–ú–ï–ù–ï–ù–ò–Ø–• (–∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫)
### get_main_menu_reply()
- –ë–´–õ–û: ‚Äî
- –°–¢–ê–õ–û: ‚Äî (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: ‚Äî

### get_main_menu_reply_admin()
- –ë–´–õ–û: ["–ö–∞—Ç–µ–≥–æ—Ä–∏–∏" | "üìç –ë–ª–∏–∂–∞–π—à–∏–µ"], —è–∑—ã–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π, –¥–∞—à–±–æ—Ä–¥ –Ω–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
- –°–¢–ê–õ–û: ["–ö–∞—Ç–µ–≥–æ—Ä–∏–∏" | "ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫"], –¥–æ–±–∞–≤–ª–µ–Ω –¥–∞—à–±–æ—Ä–¥-—Ä—è–¥, –ø—Ä–æ—Ñ–∏–ª—å/–ø–æ–º–æ—â—å –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ, —è–∑—ã–∫ –≤–Ω—É—Ç—Ä–∏ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: –∑–∞–º–µ–Ω–∞ "–ë–ª–∏–∂–∞–π—à–∏–µ" ‚Üí "–ò–ò –ü–æ–º–æ—â–Ω–∏–∫"; —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä—è–¥–æ–≤; –ø–µ—Ä–µ–Ω–æ—Å —è–∑—ã–∫–∞

### get_user_cabinet_keyboard()
- –ë–´–õ–û: –æ—Ç–¥–µ–ª—å–Ω—ã–µ "–∫–∞—Ä–º–∞" –∏ "–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è"
- –°–¢–ê–õ–û: –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è "üìà –ö–∞—Ä–º–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è"
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫, —É–¥–∞–ª–µ–Ω–∏–µ "–ö–∞—Ç–∞–ª–æ–≥ –º–µ—Å—Ç"

### get_partner_cabinet_keyboard()
- –ë–´–õ–û: –±–µ–∑ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É", —è–∑—ã–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π
- –°–¢–ê–õ–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É"; —è–∑—ã–∫ –≤–Ω—É—Ç—Ä–∏ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏; –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ pending
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫, —Ñ–∏–∫—Å–∞ –ª–æ–≥–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–±–∏–Ω–µ—Ç–∞

### get_admin_keyboard()
- –ë–´–õ–û: –±–µ–∑ "ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã" –∏ "üìß –†–∞—Å—Å—ã–ª–∫–∞"
- –°–¢–ê–õ–û: –¥–æ–±–∞–≤–ª–µ–Ω—ã "ü§ù –ü–∞—Ä—Ç–Ω—ë—Ä—ã" –∏ "üìß –†–∞—Å—Å—ã–ª–∫–∞"
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

### get_superadmin_keyboard()
- –ë–´–õ–û/–°–¢–ê–õ–û: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó
- –ò–ó–ú–ï–ù–ï–ù–ò–Ø: ‚Äî

## 7. –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–°
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¢–ó: –ø–æ–ª–Ω–æ–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Å–æ–±–ª—é–¥–µ–Ω—ã –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã UI/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ (–º–∞—Å—Ç–µ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è, –º–µ–Ω—é)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –Ω–µ—Ç

---

## 8. –ú–∞—Å—Ç–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (FSM)

- –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞: "ü§ù –°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º", "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É", /add_card ‚Äî –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ–¥–Ω–æ–º—É —Å—Ç–∞—Ä—Ç–æ–≤–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
- –ü–æ—Ç–æ–∫ —à–∞–≥–æ–≤:
  1) –ì–æ—Ä–æ–¥ (–∏–Ω–ª–∞–π–Ω) ‚Üí 2) –†–∞–π–æ–Ω (–∏–Ω–ª–∞–π–Ω, –µ—Å—Ç—å "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å") ‚Üí 3) –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–∏–Ω–ª–∞–π–Ω –ø–æ –º–µ–Ω—é) ‚Üí 4) –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
  5) –ù–∞–∑–≤–∞–Ω–∏–µ (2‚Äì60 —Å–∏–º–≤–æ–ª–æ–≤) ‚Üí 6) –û–ø–∏—Å–∞–Ω–∏–µ (–¥–æ 600, –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å) ‚Üí 7) –ö–æ–Ω—Ç–∞–∫—Ç (—Ç–µ–ª.) ‚Üí 8) –ê–¥—Ä–µ—Å (—Ç–µ–∫—Å—Ç –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
  9) Google Maps (–≤–∞–ª–∏–¥–Ω—ã–π URL) ‚Üí 10) –§–æ—Ç–æ (–¥–æ 6; reply "‚úÖ –ì–æ—Ç–æ–≤–æ (X/6)", –∏–Ω–ª–∞–π–Ω "üóë –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ" / "‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å")
  11) –°–∫–∏–¥–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ; –ø—Ä–æ—Ü–µ–Ω—Ç –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ü–∏–∏) ‚Üí 12) –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
- –ó–∞–º–µ—á–∞–Ω–∏—è:
  - –°—á—ë—Ç—á–∏–∫ —Ñ–æ—Ç–æ –≤ –∫–Ω–æ–ø–∫–µ "‚úÖ –ì–æ—Ç–æ–≤–æ (X/6)" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–Ω–∏–º–∫–∞
  - –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å; –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–π –∫–∞–±–∏–Ω–µ—Ç –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–∏ pending

## 9. –ú–æ–¥–µ—Ä–∞—Ü–∏—è

- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É: –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –ø–æ–ª—è–º–∏ (ID, –ø–∞—Ä—Ç–Ω—ë—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, –∫–æ–Ω—Ç–∞–∫—Ç, —Å–∫–∏–¥–∫–∞, GMaps) –∏ –∫–Ω–æ–ø–∫–∞–º–∏ "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" / "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å" / "üìã –û—Ç–∫—Ä—ã—Ç—å –æ—á–µ—Ä–µ–¥—å"
- –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –æ—á–µ—Ä–µ–¥—å –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è catch-all: –∏—Å–∫–ª—é—á–µ–Ω—ã –ø—Ä–µ—Ñ–∏–∫—Å—ã `mod_*`, `adm:*`, `partner*`, `pfsm:*`, `pg:*`, `ai_agent:*`
- –î–∞—à–±–æ—Ä–¥: –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –∞–¥–º–∏–Ω–∞/—Å—É–ø–µ—Ä–∞ —Å—á—ë—Ç—á–∏–∫ "üìä –î–∞—à–±–æ—Ä–¥: –ú–æ–¥–µ—Ä–∞—Ü–∏—è(N) | ‚Ä¶" –æ—Ç—Ä–∞–∂–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å

## 10. QR –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞

- –ö–Ω–æ–ø–∫–∞ "üßæ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö/–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
- –î–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Å—Ç–∞—Ç—É—Å–µ pending –∫–Ω–æ–ø–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

## 11. –î–µ–ø–ª–æ–π (PowerShell)

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ [[ru]]:

```
git add -A
git commit -m "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: –º–µ–Ω—é, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º–∞—Å—Ç–µ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è"
git push origin main
railway up
```

–ï—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–ø–∏—è —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏–¥–µ—Ä-–ª–æ–∫ Redis (rolling deploy), —É–¥–∞–ª–∏—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π:

```
railway run python -c "import os,asyncio,redis.asyncio as redis`nasync def m():`n    r=redis.from_url(os.getenv('REDIS_URL'))`n    print('DEL',await r.delete('production:bot:8363530491:polling:leader'))`n    await r.close()`nasyncio.run(m())"
railway up
```
