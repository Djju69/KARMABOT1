# Railway Deployment Guide

This guide will walk you through deploying KarmaBot to Railway.

## Prerequisites

- GitHub account
- Railway account (connected to GitHub)
- Telegram Bot Token from [@BotFather](https://t.me/botfather)
- Sentry DSN (optional, for error tracking)

## Deployment Scripts

We provide deployment scripts to simplify the process:

### Windows
- `deploy.ps1` - Deploy changes to Railway
- `verify_deployment.ps1` - Verify the deployment status

### Linux/macOS
- `deploy.sh` - Deploy changes to Railway
- `verify_deployment.sh` - Verify the deployment status

## Step 1: Push to GitHub

```bash
# Initialize git if not already done
git init

# Add all files
git add .

# Commit changes
git commit -m "Initial commit with Railway configuration"

# Add remote repository
git remote add origin https://github.com/Djju69/KARMABOT1.git

# Push to main branch
git push -u origin main
```

## Step 2: Set Up Railway Project

1. Go to [Railway Dashboard](https://railway.app/dashboard)
2. Click "New Project"
3. Select "Deploy from GitHub repo"
4. Choose your repository: `Djju69/KARMABOT1`
5. Select "Deploy Now"

## Step 3: Configure Environment Variables

In the Railway dashboard, go to your project → Variables tab and add:

```
# Required
BOT_TOKEN=your_telegram_bot_token
ADMIN_ID=your_telegram_admin_id
ENVIRONMENT=production

# Database (auto-generated by Railway)
DATABASE_URL=postgresql://...

# Optional but recommended
SENTRY_DSN=your_sentry_dsn
LOG_LEVEL=INFO
SECRET_KEY=generate_a_secure_secret_key
```

## Step 4: Set Up PostgreSQL

1. In Railway dashboard, go to "Plugins"
2. Add "PostgreSQL" plugin
3. The `DATABASE_URL` will be automatically added to your environment variables

## Step 5: Deploy

1. Railway will automatically deploy on push to the main branch
2. Or manually trigger a deployment from the Railway dashboard

## Step 6: Verify Deployment

1. Check the deployment logs in Railway
2. Test the health check endpoint: `https://your-railway-url/api/health`
3. Send a message to your Telegram bot to verify it's running

## Step 7: Set Up Custom Domain (Optional)

1. Go to your project in Railway
2. Navigate to "Settings" → "Domains"
3. Add your custom domain
4. Follow the instructions to configure DNS

## Step 8: Set Up Monitoring (Recommended)

1. In Railway, go to "Monitoring"
2. Set up alerts for errors and resource usage
3. Configure log retention as needed

## Troubleshooting

### Common Issues

1. **Deployment Fails**
   - Check logs in Railway dashboard
   - Verify all required environment variables are set
   - Ensure port configuration matches Railway's requirements

2. **Bot Not Responding**
   - Check if the webhook is properly set
   - Verify `BOT_TOKEN` is correct
   - Check logs for any errors

3. **Database Connection Issues**
   - Verify `DATABASE_URL` is correctly set
   - Check if the PostgreSQL plugin is running
   - Ensure the database has been initialized

## Maintenance

### Updating the Application

1. Push changes to the main branch
2. Railway will automatically deploy the updates

### Backups

1. Railway automatically backs up your PostgreSQL database
2. You can also set up additional backups in the Railway dashboard

### Scaling

1. In Railway, go to your project → Settings → Scale
2. Adjust resources as needed

## Support

For additional help, please refer to:
- [Railway Documentation](https://docs.railway.app/)
- [Project README.md](./README.md)
- [Open an Issue](https://github.com/Djju69/KARMABOT1/issues)
