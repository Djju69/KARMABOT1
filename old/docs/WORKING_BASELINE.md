# –†–∞–±–æ—á–∏–π –±–∞–∑–æ–≤—ã–π —Å–ª–µ–ø–æ–∫ (Baseline)

–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω‚Äë–¥–µ–ø–ª–æ—è –Ω–∞ Railway, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç.

## –°—Ä–µ–¥–∞ –∏ –∑–∞–ø—É—Å–∫
- Railway production, —Ä–µ–∂–∏–º webhook (`DISABLE_POLLING=true`)
- `RAILWAY_STATIC_URL=web-production-d51c7.up.railway.app`
- –í–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä: Uvicorn –Ω–∞ `0.0.0.0:8080`, –≤–µ–±—Ö—É–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `https://<RAILWAY_STATIC_URL>/webhook`
- –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –∫–æ–º–∞–Ω–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ë–î: PostgreSQL (–ª–æ–≥: ¬´–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–î: postgresql://‚Ä¶¬ª)
- –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ, –ø–æ –ª–æ–≥–∞–º):
  - 001, 001.1, 002, 003, 004, 005, 005.5, 006, 007, 008
  - 016 (+–ø–æ–¥‚Äë–≤–µ—Ä—Å–∏–∏ .1‚Äì.7), 017, 018, 019, 020
  - 010 (user features)
- –í —Ç–∞–±–ª–∏—Ü–µ `users` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–æ–ª–±–µ—Ü `policy_accepted`; —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ asyncpg

## –§–∏—á–∞‚Äë—Ñ–ª–∞–≥–∏ (–ø–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º –ª–æ–≥–∞–º)
- `New Menu=True`
- `Partner FSM=True`
- `Moderation=True`
- `QR WebApp=True`
- `Listen Notify=False`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–µ–Ω—ã —Å–µ—Ä–≤–∏—Å–Ω—ã–µ: `Support Voice=True`, `Support AI=True`, `Support Reports=True`

## –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–¥–æ–ø—É—Å–∫)
- –ü–æ–¥–∫–ª—é—á—ë–Ω `PrivacyPolicyMiddleware` —Å –∂—ë—Å—Ç–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –¥–æ –ø—Ä–∏–Ω—è—Ç–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏
- –†–∞–∑—Ä–µ—à–µ–Ω–æ –¥–æ —Å–æ–≥–ª–∞—Å–∏—è:
  - –ö–æ–º–∞–Ω–¥—ã: —Ç–æ–ª—å–∫–æ `/start`
  - Callback: `lang:*`, `policy:*`, `accept_policy`, `decline_policy`
- –°—É–ø–µ—Ä‚Äë–∞–¥–º–∏–Ω (ID –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫) ‚Äî –ø–æ–ª–Ω—ã–π bypass
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
  - –°–Ω–∞—á–∞–ª–∞ FSM (`policy_accepted`)
  - –ó–∞—Ç–µ–º –ë–î: —á—Ç–µ–Ω–∏–µ `users.policy_accepted` (PostgreSQL —á–µ—Ä–µ–∑ `asyncpg`), –ø—Ä–∏ `True` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ –≤ FSM
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω¬ª —Ñ–ª–∞–≥ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î –∏ FSM; –º–µ–Ω—é —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

## –†–æ—É—Ç–µ—Ä—ã (–ø–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ª–æ–≥–∞–º)
- `basic`
- `callback_router`
- `language`
- `main_menu_router`
- `profile_router`
- `partner_router`
- `activity_router`
- `admin_cabinet`
- `category_router`
- `plastic_cards_router`
- `cabinet_router`
- `partner_fsm_router`
- `partner_confirmation_router`
- `broadcast_router`
- `loyalty_settings_router`

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–æ–¥—É–ª—å `help_with_ai` –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω (—Ä–∞–Ω–µ–µ –±—ã–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å `SkipHandler` –¥–ª—è aiogram v3).

## –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (reply‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞)
- –ö–Ω–æ–ø–∫–∏ (–∫–∞–Ω–æ–Ω):
  - `üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏`
  - `üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π`
  - `‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ`
  - `üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `core/handlers/main_menu_router.py` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (–≤–∫–ª—é—á–∞—è —ç–º–æ–¥–∑–∏)
- –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Äî `ensure_policy_accepted(...)` –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- –ö–æ–º–∞–Ω–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ; –º–µ–Ω—é –∏ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏
- –°—É–ø–µ—Ä‚Äë–∞–¥–º–∏–Ω –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –≤—Å–µ–≥–¥–∞

## –ó–¥–æ—Ä–æ–≤—å–µ/–≤–µ–±—Ö—É–∫
- `/health` –æ—Ç–≤–µ—á–∞–µ—Ç `200 OK`
- –í–µ–±—Ö—É–∫ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ Railway URL

## –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã UI (–≤–∞–∂–Ω–æ)
- –ù–µ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç—ã –∏ –ø–æ—Ä—è–¥–æ–∫ –∫–Ω–æ–ø–æ–∫ (–≤–∫–ª—é—á–∞—è —ç–º–æ–¥–∑–∏)
- –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∫–Ω–æ–ø–∫–∏ –±–µ–∑ RFC –∏ —Ñ–∏—á–∞‚Äë—Ñ–ª–∞–≥–∞
- –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ ‚Äî –±–µ–∑ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–Ω–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
1. `/start` ‚Üí –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ ‚Üí —ç–∫—Ä–∞–Ω –ø–æ–ª–∏—Ç–∏–∫–∏
2. –ù–∞–∂–∞—Ç—å ¬´‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω¬ª ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
3. –ù–∞–∂–∞—Ç—å `üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏` / `üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç` / `‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ` / `üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π` ‚Üí –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç
4. –î–ª—è —Å—É–ø–µ—Ä‚Äë–∞–¥–º–∏–Ω–∞ ‚Äî –¥–æ—Å—Ç—É–ø –±–µ–∑ –ø–æ–ª–∏—Ç–∏–∫–∏

## –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- GitHub: https://github.com/Djju69/KARMABOT1
