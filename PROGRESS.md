# –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¢–ó (—Ä–µ–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç)

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-09-05, 10:28 (VN, +07+0700)
–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥–µ–Ω: AI Code Analyzer

## üìä –†–µ–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞ (–ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏ —Å—Ç–∞—Ç—É—Å—ã)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ UX (–±–æ—Ç): 85%** üîÑ
  - 6 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Reply): 100%
  - Inline‚Äë—Ñ–∏–ª—å—Ç—Ä—ã restaurants: 100% (`core/keyboards/inline_v2.py` L29-L48; `core/handlers/category_handlers_v2.py` L89-L95)
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è 5/—Å—Ç—Ä: 100% (`core/handlers/category_handlers_v2.py` L97-L105, L142-L147)
  - –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏: 85% (`core/services/card_renderer.py` + –∫–Ω–æ–ø–∫–∏ ‚ÑπÔ∏è/üó∫ `get_catalog_item_row`)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –ì–µ–æ–ø–æ–∏—Å–∫ ‚Äî –∑–∞–≥–ª—É—à–∫–∞ (TODO –≤ `category_handlers_v2.py` L356-L359)

- **–ö–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 65%** üîÑ
  - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: 60%
  - –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: 50%
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ QR-–∫–æ–¥–∞–º–∏: 70% (`web/routes_qr.py` –±–∞–∑–æ–≤—ã–π —Ñ–ª–æ—É)
  - –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∏–¥–æ–∫: 50%
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–ª–ª–æ–≤: 60% (`core/services/loyalty_service.py`)
  - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞: 60% (–µ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—è/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞; —á–∞—Å—Ç—å TODO)
  - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è: 40%
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: 40%
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –ù–µ–ø–æ–ª–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ UX, —á–∞—Å—Ç—å –ª–æ–≥–∏–∫–∏ –ø–æ–º–µ—á–µ–Ω–∞ TODO

- **–ö–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞: 80%** üîÑ 
  - API –∑–∞–≥—Ä—É–∑–∫–∏/–ª–∏—Å—Ç–∏–Ω–≥–∞/—É–¥–∞–ª–µ–Ω–∏—è: 95% (`web/routes_cabinet.py` L871-L949, L998-L1031)
  - –ë–æ—Ç‚Äë—Ö–µ–Ω–¥–ª–µ—Ä—ã –≥–∞–ª–µ—Ä–µ–∏: 80% (`core/handlers/partner.py` ‚Äî FSM –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ, –ª–∏–º–∏—Ç 6)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã: 70% (—á–∞—Å—Ç–∏—á–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞/—Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ API ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å

- **–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: 70%** üîÑ
  - –†–æ—É—Ç—ã admin_cabinet: 75% (`core/handlers/admin_cabinet.py`)
  - –ú–æ–¥–µ—Ä–∞—Ü–∏—è: 80% (`core/handlers/moderation.py`, `core/database/db_v2.py` moderation_log)
  - –û—Ç—á—ë—Ç—ã: 55% (`web/routes_dashboard.py` —Å–æ–¥–µ—Ä–∂–∏—Ç TODO-–∑–∞–≥–ª—É—à–∫–∏)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –í –æ—Ç—á—ë—Ç–∞—Ö –µ—Å—Ç—å TODO-–∑–∞–≥–ª—É—à–∫–∏ (L171, L207, L231)

- **–°–µ—Ä–≤–∏—Å—ã: 82%** üîÑ
  - QR‚Äë—Å–µ—Ä–≤–∏—Å: 90% (—é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç; `web/routes_qr.py`; redeem –≤ `web/routes_cabinet.py` L212-L304)
  - Loyalty: 80% (–±–æ–≥–∞—Ç—ã–π —Å–µ—Ä–≤–∏—Å `core/services/loyalty_service.py`)
  - Referral: 70% (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –µ—Å—Ç—å; –µ—Å—Ç—å TODO –≤ process_referral)
  - Cards: 70%
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - TODO –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ (L940-L945)

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: 80%** üîÑ
  - RBAC: 85% (`core/security/policy.py`, `web/routes_admin.py` —Ä–æ–ª–∏/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
  - 2FA: 100% (–∞–¥–º–∏–Ω TOTP `web/routes_admin.py`)
  - JWT: 80% (`core/services/webapp_auth.py`, `core/security/jwt_service.py`)
  - Rate limiting: 60% (`web/main.py` in‚Äëmemory –¥–ª—è /api/qr/*)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - JWT —Å–µ–∫—Ä–µ—Ç/pyjwt –≤ dev —Ñ–æ–ª–ª–±–µ–∫–∞—Ö ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–æ–¥-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: 55%** üîÑ
  - –ú–µ—Ç—Ä–∏–∫–∏: 60% (`core/monitoring.py`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–∞–∑–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è)
  - Prometheus: 60% (–µ—Å—Ç—å `/metrics` –≤ `web/main.py` L424-L426)
  - Grafana: 0% (–¥–∞—à–±–æ—Ä–¥—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)
  - Health checks: 70% (`web/health.py`)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤ –∏ –∞–ª–µ—Ä—Ç–æ–≤

- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 68%** üîÑ
  - Unit —Ç–µ—Å—Ç—ã: 60%
  - Integration: 60%
  - E2E: 55% (–∫–∞—Ä–∫–∞—Å `tests/e2e/test_user_journey.py`, xfail 3/3 ‚Äî –≤ —Ä–∞–±–æ—Ç–µ)
  - –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞: ~60-70% (–ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –Ω–∞–±–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - Smoke –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (–∞–ª–∏–∞—Å—ã /cabinet/* –≤ minimal‚Äëmode)

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 80%** üîÑ
  - README: 85% (–ø–æ–¥—Ä–æ–±–Ω—ã–π)
  - API docs: 60%
  - Deploy guide: 80% (`DEPLOYMENT.md`, Railway/Heroku)
  - **–ü—Ä–æ–±–ª–µ–º—ã:**
    - –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å—Ä–µ–∑–æ–≤ –ø–æ API/–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- –ù–µ—Ç Grafana –¥–∞—à–±–æ—Ä–¥–æ–≤ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- TODO –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/–ø—Ä–æ–≤–µ—Ä–∫–∏)

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- –ì–µ–æ–ø–æ–∏—Å–∫ ‚Äî –∑–∞–≥–ª—É—à–∫–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
- –û—Ç—á—ë—Ç—ã –∞–¥–º–∏–Ω–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç TODO

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- –†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–º API

## üìù –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –ù–µ–¥–µ–ª—è 1:
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏ (user journey, catalog, cabinet)
- [ ] –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –∏ —Ç–µ—Å—Ç—ã

### –ù–µ–¥–µ–ª—è 2:
- [ ] –î–∞—à–±–æ—Ä–¥—ã Grafana –∏ –∞–ª–µ—Ä—Ç—ã Prometheus
- [ ] –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ UX

### –ù–µ–¥–µ–ª—è 3-4:
- [ ] –£–ª—É—á—à–∏—Ç—å –æ—Ç—á—ë—Ç—ã –∞–¥–º–∏–Ω–∫–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ TODO/FIXME

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ:
- core/services/loyalty_service.py L940-L945 ‚Äî TODO –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –û–±—ã—á–Ω—ã–µ:
- web/routes_dashboard.py L171/L207/L231 ‚Äî –∑–∞–≥–ª—É—à–∫–∏
- core/handlers/category_handlers_v2.py L356 ‚Äî –≥–µ–æ–ø–æ–∏—Å–∫

## üìà –û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

**–†–µ–∞–ª—å–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 82%**

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞: B**

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: –ß–∞—Å—Ç–∏—á–Ω–æ**

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –∏ –ø–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏
   - –î–æ–±–∞–≤–∏—Ç—å Grafana –¥–∞—à–±–æ—Ä–¥—ã –∏ –±–∞–∑–æ–≤—ã–µ –∞–ª–µ—Ä—Ç—ã

2. **–í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏:**
   - –î–æ–ø–∏–ª–∏—Ç—å E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
   - –†–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

3. **–í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞:**
   - –†–∞—Å—à–∏—Ä–∏—Ç—å –æ—Ç—á—ë—Ç—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç –≤ –∞–¥–º–∏–Ω–∫–µ
   - –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–º-–º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã –ø–æ SLA

---

## üìÇ –ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- –í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: 434
- –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: 9.3M
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (Python): 38‚ÄØ937
- –°—Ç—Ä–æ–∫–∏ Markdown: 2‚ÄØ925; Shell: 473; PowerShell: 486; JS: 1
- –ö–ª—é—á–µ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
  - `core/` ‚Äî –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞, —Å–µ—Ä–≤–∏—Å—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ë–î-–∞–¥–∞–ø—Ç–µ—Ä—ã, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —Ö–µ–Ω–¥–ª–µ—Ä—ã
  - `web/` ‚Äî FastAPI –º–∞—Ä—à—Ä—É—Ç—ã, –æ—Å–Ω–æ–≤–Ω–æ–π `web/main.py`, health, cabinet, admin, auth, loyalty, qr
  - `tests/` ‚Äî unit/integration/e2e; –∫–∞—Ä–∫–∞—Å—ã E2E –ø–æ–º–µ—á–µ–Ω—ã xfail
  - `migrations/` ‚Äî SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å—Ö–µ–º: –ª–æ—è–ª—å–Ω–æ—Å—Ç—å, —Ä–µ—Ñ–µ—Ä–∞–ª—ã, 2FA, –∫–∞—Ç–∞–ª–æ–≥
  - `docs/` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —á–µ–∫–ª–∏—Å—Ç—ã; –µ—Å—Ç—å `docs/prometheus/`
  - `deployment/` ‚Äî `docker-compose.prod.yml`
  - –∫–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã Railway/Procfile/Dockerfile –∏ requirements*

## üîé –°–≤–µ—Ä–∫–∞ –∑–∞—è–≤–ª–µ–Ω–∏–π (‚úÖ/üîÑ/‚ùå/‚ö†Ô∏è)
- `process_referral` –≤ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏: ‚ùå (–µ—Å—Ç—å TODO –Ω–∞ L940‚Äì945)
- –ì–µ–æ–ø–æ–∏—Å–∫ (5 –∫–º, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è): üîÑ (–µ—Å—Ç—å —É—Ç–∏–ª–∏—Ç—ã `core/utils/geo.py`, –Ω–æ –∑–∞–≥–ª—É—à–∫–∞ –≤ `category_handlers_v2.py` L356‚Äì359)
- Admin Dashboard ¬´—Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î¬ª: ‚ùå (`web/routes_dashboard.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–∫–∏, TODO –Ω–∞ L171/207/231)
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/admin/top-places`, `/admin/referrals-stats`: ‚ùå (–Ω–µ –Ω–∞–π–¥–µ–Ω—ã)
- `routes_user_cabinet.py`: ‚ùå (–Ω–µ—Ç —Ñ–∞–π–ª–∞; —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞–±–∏–Ω–µ—Ç–∞ –≤ `web/routes_cabinet.py`)
- `moderation_service.py`, `notification_service.py`: ‚ùå (–Ω–µ—Ç —Ñ–∞–π–ª–æ–≤; —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–∞—Å—Ç–∏—á–Ω–æ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö)
- 2FA (TOTP) –¥–ª—è –∞–¥–º–∏–Ω–æ–≤: ‚úÖ (`web/routes_admin.py`)
- `/metrics` Prometheus: ‚úÖ (`web/main.py` L424‚Äì426)

## üß© –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ñ–∞–π–ª—ã)
- –õ–æ—è–ª—å–Ω–æ—Å—Ç—å: ‚úÖ `core/services/loyalty_service.py` (–ø–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫—Ä–æ–º–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- –†–µ—Ñ–µ—Ä–∞–ª—ã: üîÑ `core/services/referral_service.py` (–±–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–±–æ–Ω—É—Å—ã, –±–µ–∑ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: ‚úÖ `core/handlers/category_handlers_v2.py` (—Ñ–∏–ª—å—Ç—Ä—ã/–ø–∞–≥–∏–Ω–∞—Ü–∏—è/–ø—Ä–æ—Å–º–æ—Ç—Ä), ‚ö†Ô∏è –≥–µ–æ–ø–æ–∏—Å–∫ ‚Äî –∑–∞–≥–ª—É—à–∫–∞
- –ü–∞—Ä—Ç–Ω—ë—Ä—ã: ‚úÖ `core/handlers/partner.py`, ‚úÖ `web/routes_cabinet.py` (–≥–∞–ª–µ—Ä–µ—è, CRUD)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: ‚úÖ `core/handlers/user.py`, –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –≤ —Ä–∞–±–æ—Ç–µ
- –ê–¥–º–∏–Ω-–¥–∞—à–±–æ—Ä–¥: üîÑ `web/routes_dashboard.py` (–º–æ–∫–∏)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: ‚úÖ `web/routes_auth.py`, ‚úÖ `core/services/webapp_auth.py`, ‚úÖ `core/security/jwt_service.py`

## üöÑ Railway: –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: ‚úÖ `railway.toml`, ‚úÖ `railway.json`, ‚úÖ `Procfile` (start: `python start.py`), ‚úÖ `Dockerfile`, ‚úÖ `requirements.txt`
- Healthcheck: ‚úÖ `/health`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: ‚úÖ `DATABASE_URL`, ‚úÖ `REDIS_URL` (–≤ `env.example`), ‚úÖ `PORT` (–≤ Railway), ‚úÖ `BOT_TOKEN`, ‚úÖ `ADMIN_ID`, ‚úÖ `JWT_SECRET` (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–¥–µ)
- –ü–æ—Ä—Ç—ã: ‚úÖ `PORT` –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è; `start.py` –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
- –ú–∏–≥—Ä–∞—Ü–∏–∏: ‚úÖ SQL-—Å–∫—Ä–∏–ø—Ç—ã –≤ `migrations/`; –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω)

## ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤—ã–±–æ—Ä–∫–∞)
- TODO: `core/services/loyalty_service.py` L940‚Äì945; `web/routes_dashboard.py` L171/207/231; `core/handlers/category_handlers_v2.py` L356‚Äì359; `web/routes_loyalty.py` L88
- –ó–∞–≥–ª—É—à–∫–∏/–º–æ–∫–∏: `web/routes_dashboard.py` (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–≥—Ä–∞—Ñ–∏–∫–∏)
- –ù–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ –∑–∞—è–≤–ª–µ–Ω–∏—é —Ñ–∞–π–ª—ã: `core/services/moderation_service.py`, `core/services/notification_service.py`, `web/routes/routes_user_cabinet.py`, —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/admin/top-places`, `/admin/referrals-stats`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–µ—Å—Ç—ã: –µ—Å—Ç—å unit/integration, E2E-—Å–∫–µ–ª–µ—Ç—ã (`tests/e2e/test_user_journey.py` xfail)
- –û—Ü–µ–Ω–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è: ~60‚Äì70% (–ø–æ –æ–±—ä—ë–º—É –∏ –æ—Ö–≤–∞—Ç—É –º–æ–¥—É–ª–µ–π)
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–æ–ø–∏—Å–∞—Ç—å: E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–±–æ—Ç ‚Üí –∫–∞—Ç–∞–ª–æ–≥ ‚Üí QR ‚Üí –ª–æ—è–ª—å–Ω–æ—Å—Ç—å), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –¥–∞—à–±–æ—Ä–¥–∞

